<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nine Box - Matriz de Talentos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loader Overlay (movido para o topo para garantir que esteja no DOM antes de qualquer script) -->
    <div id="appLoader" class="loader-overlay">
        <div class="loader-card">
            <div class="loader-brand">
                <img src="REFRAMAX_.jpeg" alt="Reframax" class="loader-logo" />
            </div>
            <div class="loader-subtitle">Avalia√ß√£o de Desempenho 2025</div>
            <div class="loader-spinner"></div>
            <div id="loaderMessage" class="loader-message">Carregando dados...</div>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="header-logo">
                <img src="REFRAMAX_.jpeg" alt="Reframax Logo">
                <div class="header-title">
                    <h1>Matriz Nine Box</h1>
                    <p class="subtitle">Ciclo de Avalia√ß√£o de Desempenho 2025</p>
                </div>
            </div>
            <nav class="header-nav">
                <a href="ninebox.html" class="nav-link active">Nine Box</a>
                <a href="config.html" class="nav-link">Configura√ß√µes</a>
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="index.html" class="nav-link logout" onclick="try{localStorage.removeItem('auth_user')}catch(e){}">Sair</a>
            </nav>
        </header>

        <div class="content">
            <div class="filter-section">
                <h3>Filtros</h3>
                <div class="filter-grid">
                    <div>
                        <label>√Årea:</label>
                        <select id="filterArea">
                            <option value="">Todas</option>
                        </select>
                    </div>
                    <div>
                        <label>Formul√°rio:</label>
                        <select id="filterForm">
                            <option value="">Todos</option>
                        </select>
                    </div>
                    <div>
                        <label>Buscar por nome:</label>
                        <input type="text" id="filterName" placeholder="Digite o nome...">
                    </div>
                    <div>
                        <label>Diretoria:</label>
                        <select id="filterDiretoria">
                            <option value="">Todas</option>
                        </select>
                    </div>
                    <div>
                        <label>Ger√™ncia:</label>
                        <select id="filterGerencia">
                            <option value="">Todas</option>
                        </select>
                    </div>
                    <div>
                        <label>Grupo de Cargo:</label>
                        <select id="filterGrupoCargo">
                            <option value="">Todos</option>
                        </select>
                    </div>
                    <div>
                        <label>Mesa:</label>
                        <select id="filterMesa">
                            <option value="">Todas</option>
                        </select>
                    </div>
                    <div>
                        <label>Gestor:</label>
                        <select id="filterGestor">
                            <option value="">Todos</option>
                        </select>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="applyFilters()">Filtrar</button>
                    <button class="btn btn-secondary" onclick="clearFilters()">Limpar Filtros</button>
                </div>
            </div>

                <!-- Controles de mudan√ßas manuais -->
                <div class="manual-changes-controls">
                    <div class="controls-group">
                        <button id="exportCSVBtn" class="btn-export">
                            <span class="btn-icon">üì•</span>
                            Exportar CSV Modificado
                        </button>
                        <button id="resetPositionsBtn" class="btn-reset">
                            <span class="btn-icon">‚Ü∫</span>
                            Resetar Posi√ß√µes Manuais
                        </button>
                        <div id="changesCounter" class="changes-counter" style="display: none;">
                            <span id="changesCount">0</span> altera√ß√£o(√µes) salva(s)
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <p><strong>üí° Dica:</strong> Voc√™ pode arrastar e soltar colaboradores entre os quadrantes. Ao fazer isso, o sistema indicar√° se as notas est√£o compat√≠veis com o novo quadrante: <span style="color: #27AE60; font-weight: 600;">‚úì Verde</span> = notas compat√≠veis, <span style="color: #F39C12; font-weight: 600;">‚ö† Amarelo</span> = parcialmente compat√≠vel, <span style="color: #E74C3C; font-weight: 600;">‚úó Vermelho</span> = notas incompat√≠veis.</p>
                </div>

                <!-- Toolbar de visualiza√ß√£o -->
                <div class="view-toolbar">
                    <button id="toggleCompactBtn" class="btn-ghost" title="Alternar vis√£o compacta" aria-pressed="false">Vis√£o compacta</button>
                </div>

                <div class="ninebox-grid">
                    <div class="empty-corner"></div>
                    <div class="axis-label horizontal">Desempenho: Baixo</div>
                    <div class="axis-label horizontal">Desempenho: M√©dio</div>
                    <div class="axis-label horizontal">Desempenho: Alto</div>
                    
                    <div class="axis-label">Potencial: Alto</div>
                    <div class="box box-1-1" onclick="showBoxDetail(1,1)">
                        <div class="box-title">Enigma</div>
                        <div class="box-count" id="count-1-1">0</div>
                        <div class="person-list" id="box-1-1"></div>
                    </div>
                    <div class="box box-1-2" onclick="showBoxDetail(1,2)">
                        <div class="box-title">Crescimento</div>
                        <div class="box-count" id="count-1-2">0</div>
                        <div class="person-list" id="box-1-2"></div>
                    </div>
                    <div class="box box-1-3" onclick="showBoxDetail(1,3)">
                        <div class="box-title">Estrela</div>
                        <div class="box-count" id="count-1-3">0</div>
                        <div class="person-list" id="box-1-3"></div>
                    </div>
                    
                    <div class="axis-label">Potencial: M√©dio</div>
                    <div class="box box-2-1" onclick="showBoxDetail(2,1)">
                        <div class="box-title">Risco</div>
                        <div class="box-count" id="count-2-1">0</div>
                        <div class="person-list" id="box-2-1"></div>
                    </div>
                    <div class="box box-2-2" onclick="showBoxDetail(2,2)">
                        <div class="box-title">Core</div>
                        <div class="box-count" id="count-2-2">0</div>
                        <div class="person-list" id="box-2-2"></div>
                    </div>
                    <div class="box box-2-3" onclick="showBoxDetail(2,3)">
                        <div class="box-title">Consistente</div>
                        <div class="box-count" id="count-2-3">0</div>
                        <div class="person-list" id="box-2-3"></div>
                    </div>
                    
                    <div class="axis-label">Potencial: Baixo</div>
                    <div class="box box-3-1" onclick="showBoxDetail(3,1)">
                        <div class="box-title">Cr√≠tico</div>
                        <div class="box-count" id="count-3-1">0</div>
                        <div class="person-list" id="box-3-1"></div>
                    </div>
                    <div class="box box-3-2" onclick="showBoxDetail(3,2)">
                        <div class="box-title">Efetivo</div>
                        <div class="box-count" id="count-3-2">0</div>
                        <div class="person-list" id="box-3-2"></div>
                    </div>
                    <div class="box box-3-3" onclick="showBoxDetail(3,3)">
                        <div class="box-title">Especialista</div>
                        <div class="box-count" id="count-3-3">0</div>
                        <div class="person-list" id="box-3-3"></div>
                    </div>
                </div>
            </div>

            <!-- Modal para detalhes -->
            <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Detalhes do colaborador">
                <div class="modal-content" tabindex="-1">
                    <button class="modal-close" onclick="closeModal()" aria-label="Fechar">&times;</button>
                    <div id="modalContent"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js?v=20251030"></script>
    <script src="app.js?v=20251030"></script>
</body>
</html>
